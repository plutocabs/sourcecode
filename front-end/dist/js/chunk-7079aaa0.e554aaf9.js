(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7079aaa0"],{"1c82":function(t,e,n){!function(e,n){t.exports=n()}(window,(function(){return n={},t.m=e=[function(t,e,n){"use strict";n.r(e);var a,r,i,o,s,c,u,l,d,p,h;o=!(i=[]),u=c=s=null,h="function"==typeof(a={props:{embed:{type:Boolean,default:!1},paystackkey:{type:String,required:!0},email:{type:String,required:!0},firstname:{type:String,default:""},lastname:{type:String,default:""},amount:{type:Number,required:!0},reference:{type:String,required:!0},channels:{type:Array,default:function(){return["card","bank"]}},accessCode:{type:String,default:""},callback:{type:Function,required:!0,default:function(){}},close:{type:Function,required:!0,default:function(){}},metadata:{type:Object,default:function(){return{}}},currency:{type:String,default:"NGN"},plan:{type:String,default:""},quantity:{type:String,default:""},subaccount:{type:String,default:""},split:{type:Object,default:function(){return{}}},splitCode:{type:String,default:""},transactionCharge:{type:Number,default:0},bearer:{type:String,default:""}},data:function(){return{scriptLoaded:null}},created:function(){var t=this;this.scriptLoaded=new Promise((function(e){t.loadScript((function(){e()}))}))},mounted:function(){this.embed&&this.payWithPaystack()},methods:{loadScript:function(t){var e=document.createElement("script");e.src="https://js.paystack.co/v1/inline.js",document.getElementsByTagName("head")[0].appendChild(e),e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,t())}:e.onload=function(){t()}},isDynamicSplit:function(){return this.split.constructor===Object&&0<Object.keys(this.split).length},payWithPaystack:function(){var t=this;this.scriptLoaded&&this.scriptLoaded.then((function(){var e={key:t.paystackkey,email:t.email,firstname:t.firstname,lastname:t.lastname,channels:t.channels,amount:t.amount,access_code:t.accessCode,ref:t.reference,callback:function(e){t.callback(e)},onClose:function(){t.close()},metadata:t.metadata,currency:t.currency,plan:t.plan,quantity:t.quantity,subaccount:t.isDynamicSplit()?"":t.subaccount,split:t.isDynamicSplit()?t.split:null,split_code:t.isDynamicSplit()?"":t.splitCode,transaction_charge:t.isDynamicSplit()?0:t.transactionCharge,bearer:t.isDynamicSplit()?"":t.bearer};t.embed&&(e.container="paystackEmbedContainer"),e=window.PaystackPop.setup(e),t.embed||e.openIframe()}))}}})?a.options:a,(r=function(){var t=this,e=t._self._c||t.$createElement;return t.embed?e("div",{attrs:{id:"paystackEmbedContainer"}}):e("button",{staticClass:"payButton",on:{click:t.payWithPaystack}},[t._t("default",[t._v("Make Payment")])],2)})&&(h.render=r,h.staticRenderFns=i,h._compiled=!0),o&&(h.functional=!0),c&&(h._scopeId="data-v-"+c),u?h._ssrRegister=d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(u)}:s&&(d=l?function(){s.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:s),d&&(h.functional?(h._injectStyles=d,p=h.render,h.render=function(t,e){return d.call(e),p(t,e)}):h.beforeCreate=(l=h.beforeCreate)?[].concat(l,d):[d]),n={exports:a,options:h};e.default=n.exports}],t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(a,r,function(t){return e[t]}.bind(null,r));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="/dist/",t(t.s=0);function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e,n}))},"3a2f":function(t,e,n){"use strict";var a=n("ade3"),r=(n("a9e3"),n("e25e"),n("9734"),n("4ad4")),i=n("a9ad"),o=n("16b7"),s=n("b848"),c=n("f573"),u=n("f2e7"),l=n("80d2"),d=n("d9bd"),p=n("58df");e["a"]=Object(p["a"])(i["a"],o["a"],s["a"],c["a"],u["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,n=t.content,a=!this.bottom&&!this.left&&!this.top&&!this.right,r=!1!==this.attach?e.offsetLeft:e.left,i=0;return this.top||this.bottom||a?i=r+e.width/2-n.width/2:(this.left||this.right)&&(i=r+(this.right?e.width:-n.width)+(this.right?10:-10)),this.nudgeLeft&&(i-=parseInt(this.nudgeLeft)),this.nudgeRight&&(i+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(i,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,n=t.content,a=!1!==this.attach?e.offsetTop:e.top,r=0;return this.top||this.bottom?r=a+(this.bottom?e.height:-n.height)+(this.bottom?10:-10):(this.left||this.right)&&(r=a+e.height/2-n.height/2),this.nudgeTop&&(r-=parseInt(this.nudgeTop)),this.nudgeBottom&&(r+=parseInt(this.nudgeBottom)),!1===this.attach&&(r+=this.pageYOffset),"".concat(this.calcYOverflow(r),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(l["h"])(this.maxWidth),minWidth:Object(l["h"])(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(l["u"])(this,"activator",!0)&&Object(d["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=r["a"].options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===l["y"].esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(a["a"])(t,this.contentClass,!0),Object(a["a"])(t,"menuable__content__active",this.isActive),Object(a["a"])(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}})},7087:function(t,e,n){t.exports=n.p+"img/pay.40590b73.png"},"767b":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-title text-center py-5"},[t._m(0),a("div",{staticClass:"misc-character d-flex justify-center mb-6"},[a("v-img",{attrs:{"max-width":"200",src:n("7087")}})],1),t.isLoading?t._e():a("p",{staticClass:"text-lg py-5"},[t._v(" Welcome, "),a("strong",[t._v(t._s(t.parent.name))]),t._v("! You are about to pay for the plan "),a("strong",[t._v(t._s(t.plan.name))]),t._v(" with "),a("strong",[t._v(t._s(t.plan.coin_count))]),t._v(" coins. The price is "),a("strong",[t._v(t._s(t.plan.price))]),t._v(" "+t._s(t.currency_code)+". ")]),t.isLoading?t._e():a("div",["paystack"==t.paymentMethod?a("paystack",{staticClass:"mx-1 v-btn v-btn--has-bg theme--light v-size--default primary my-2 py-6 px-6",attrs:{amount:100*t.plan.price,email:t.parent.email,paystackkey:t.paymentKey,reference:t.generateReference,callback:t.processPystackPayment,close:t.closePaystack,metadata:{plan_id:t.plan_id},currency:t.currency_code}},[t._v(" Pay "),a("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-check ")])],1):a("v-btn",{staticClass:"my-2 py-6 px-6",attrs:{color:"primary"},on:{click:function(e){return t.buyPlan(t.plan)}}},[t._v(" Pay "),a("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-check ")])],1)],1)])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"text-2xl font-weight-semibold text--primary d-flex align-center justify-center"},[n("span",{staticClass:"my-6"},[t._v("Pay for plan")])])}],i=n("1da1"),o=(n("d3b7"),n("b0c0"),n("a4d3"),n("e01a"),n("0d03"),n("25f0"),n("96cf"),n("a479")),s=n("1c82"),c=n.n(s),u={components:{InfoToolTip:o["a"],paystack:c.a},data:function(){return{parent_id:null,plan_id:null,plan:null,parent:null,email:"",paymentKey:"",userName:"",paymentMethod:"",currency_code:"",planType:"",availability:null,availableDrivers:[],isLoading:!0,search:"",planDialog:!1,valid:!0,id:null,planTypeName:"",selectedPlan:null,headers:[{text:"ID",value:"id",align:"start",filterable:!1},{text:"Name",value:"name"},{text:"Coins",value:"coin_count"},{text:"Price",value:"price"},{text:"Actions",value:"actions",sortable:!1}],razorpay_script:"https://checkout.razorpay.com/v1/checkout.js",flutterwave_script:"https://checkout.flutterwave.com/v3.js"}},mounted:function(){null!=this.$route.params.parent_id&&(this.parent_id=this.$route.params.parent_id,this.plan_id=this.$route.params.plan_id,this.fetchPlanDetailsForParent())},computed:{paystackReference:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<10;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}},methods:{fetchPlanDetailsForParent:function(){var t=this;this.isLoading=!0,axios.get("/users/fetch-plan-details-for-parent",{params:{parent_id:this.parent_id,plan_id:this.plan_id}}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading=!1,t.plan=n.data.plan,t.currency_code=n.data.currency_code,t.parent=n.data.parent,t.paymentMethod=n.data.payment_method,t.paymentKey=n.data.key,"razorpay"!=t.paymentMethod){e.next=11;break}return e.next=9,t.loadRazorPay();case 9:e.next=14;break;case 11:if("flutterwave"!=t.paymentMethod){e.next=14;break}return e.next=14,t.loadFlutterWave();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["catch"]((function(e){t.isLoading=!1,t.$notify({title:"Error",text:"Error while fetching plan details",type:"error"}),t.$swal("Error",e.response.data.message,"error"),console.log(e)}))},loadFlutterWave:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=document.createElement("script");n.src=t.flutterwave_script,n.onload=function(){e(!0)},n.onerror=function(){e(!1)},document.querySelector('[src="'.concat(t.flutterwave_script,'"]'))||document.body.appendChild(n)})));case 1:case"end":return e.stop()}}),e)})))()},buyPlan:function(t){var e=this;this.$swal.fire({title:"Buy plan",text:"Are you sure to buy the plan ' "+t.name+" ' ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, buy it!"}).then((function(n){if(n.isConfirmed){if(console.log(e.paymentMethod),0==t.price)return void e.buyPlanBraintreeServer(t.id);if(e.selectedPlan=t,"none"==e.paymentMethod)return void e.$swal("Error","No payment method found","error");if("braintree"==e.paymentMethod)return void e.$router.push({name:"pay-parent-plan-"+e.paymentMethod,params:{plan_id:t.id,parent_id:e.parent_id,tokenization_key:e.paymentKey}});if("razorpay"==e.paymentMethod)return void e.createRazorPayOrder(t.id);if("flutterwave"==e.paymentMethod)return void e.initializeFlutterwaveOrder(t.id);if("stripe"==e.paymentMethod)return void e.$router.push({name:"pay-parent-plan-"+e.paymentMethod,params:{plan_id:t.id}})}}))},buyPlanBraintreeServer:function(t){var e=this;this.isLoading=!0,axios.post("/users/capture-braintree-parent",{plan_id:t,parent_id:this.parent_id,nonce:"fake-valid-nonce"}).then((function(t){e.$notify({title:"Success",text:"Coins added successfully",type:"success"})}))["catch"]((function(t){e.$notify({title:"Error",text:"Error while buying plan",type:"error"}),e.$swal("Error",t.response.data.message,"error")})).then((function(){e.isLoading=!1}))},loadRazorPay:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=document.createElement("script");n.src=t.razorpay_script,n.onload=function(){e(!0)},n.onerror=function(){e(!1)},document.body.appendChild(n)})));case 1:case"end":return e.stop()}}),e)})))()},payRazorPay:function(t,e,n,a){var r=this,i={key:r.paymentKey,amount:n,currency:a,name:r.userName,order_id:e,handler:function(e){var n=e.razorpay_payment_id,a=e.razorpay_order_id,i=e.razorpay_signature;r.buyPlanRazorpayServer(t,n,a,i)}},o=new window.Razorpay(i);o.on("payment.failed",(function(t){alert(t.error.description)})),o.open(),this.loading=!1},createRazorPayOrder:function(t){var e=this;this.isLoading=!0,axios.post("/users/create-razorpay-order-parent",{plan_id:t,parent_id:this.parent_id}).then((function(n){e.isLoading=!1;var a=n.data.order_id,r=n.data.order_amount,i=n.data.currency;e.payRazorPay(t,a,r,i)}))["catch"]((function(t){e.isLoading=!1,console.log(t),e.$swal("Error",t.response.data.message,"error")}))},buyPlanRazorpayServer:function(t,e,n,a){var r=this;this.isLoading=!0,axios.post("/users/capture-razorpay-payment-parent",{plan_id:t,razorpay_payment_id:e,razorpay_order_id:n,razorpay_signature:a,parent_id:this.parent_id}).then((function(t){r.$notify({title:"Success",text:"Coins added successfully",type:"success"})}))["catch"]((function(t){r.$notify({title:"Error",text:"Error while buying plan",type:"error"}),r.$swal("Error",t.response.data.message,"error")})).then((function(){r.isLoading=!1}))},initializeFlutterwaveOrder:function(t){var e=this,n=this;this.isLoading=!0,axios.post("/users/initialize-flutterwave-order-parent",{plan_id:t,parent_id:this.parent_id}).then((function(t){e.isLoading=!1;var a=t.data.order_amount,r=t.data.currency,i=t.data.email,o={tx_ref:e.generateReference(),amount:a,currency:r,payment_options:"card,ussd",redirect_url:"",callback:n.makeFlutterwavePaymentCallback,onclose:n.closedFlutterwavePaymentModal,public_key:n.paymentKey,customer:{email:i}};FlutterwaveCheckout(o)}))["catch"]((function(t){e.isLoading=!1,console.log(t),e.$swal("Error",t.response.data.message,"error")}))},makeFlutterwavePaymentCallback:function(t){var e=this;console.log("Pay",t),"successful"==t.status?axios.post("/users/capture-flutterwave-payment-parent",{plan_id:this.selectedPlan.id,transaction_id:t.transaction_id,parent_id:this.parent_id}).then((function(t){e.$notify({title:"Success",text:"Coins added successfully",type:"success"})}))["catch"]((function(t){e.$notify({title:"Error",text:"Error while buying plan",type:"error"}),e.$swal("Error",t.response.data.message,"error")})):this.$swal("Error","Payment failed","error")},closedFlutterwavePaymentModal:function(){console.log("payment is closed")},generateReference:function(){var t=new Date;return t.getTime().toString()},processPystackPayment:function(t){console.log(t);var e=this;"success"==t.status?(e.isLoading=!0,axios.post("/users/capture-paystack-payment-parent",{reference:t.reference,parent_id:e.parent_id}).then((function(t){e.isLoading=!1,e.$notify({title:"Success",text:"Coins added successfully",type:"success"})}))["catch"]((function(t){e.isLoading=!1,e.$notify({title:"Error",text:"Error while buying plan",type:"error"}),e.$swal("Error",t.response.data.message,"error")}))):e.$swal("Error","Payment failed","error")},closePaystack:function(){console.log("You closed checkout page")}}},l=u,d=n("2877"),p=n("6544"),h=n.n(p),f=n("8336"),y=n("132d"),m=n("adda"),v=Object(d["a"])(l,a,r,!1,null,null,null);e["default"]=v.exports;h()(v,{VBtn:f["a"],VIcon:y["a"],VImg:m["a"]})},9734:function(t,e,n){},a479:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-icon",t._g({attrs:{color:"primary"}},a),[t._v(" mdi-information-outline ")])]}}])},[n("span",[t._v(t._s(t.message))])])},r=[],i={name:"InfoToolTip",props:{message:{type:String,default:""}}},o=i,s=n("2877"),c=n("6544"),u=n.n(c),l=n("132d"),d=n("3a2f"),p=Object(s["a"])(o,a,r,!1,null,null,null);e["a"]=p.exports;u()(p,{VIcon:l["a"],VTooltip:d["a"]})}}]);
//# sourceMappingURL=chunk-7079aaa0.e554aaf9.js.map