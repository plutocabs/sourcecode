(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-099bbf32"],{"18d2":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.isLoading?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-skeleton-loader",{attrs:{type:"card",height:"200"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-row",{staticClass:"match-height"},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-skeleton-loader",{attrs:{type:"card",height:"200"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-skeleton-loader",{attrs:{type:"card",height:"200"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-skeleton-loader",{attrs:{type:"card",height:"120"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-skeleton-loader",{attrs:{type:"image",height:"500"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-skeleton-loader",{attrs:{type:"image",height:"500"}})],1)],1):a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("dashboard-card-remaining-coins",{attrs:{amount:t.remainingCoins}})],1),a("v-col",{attrs:{cols:"12",md:"6",sm:"12"}},[a("v-row",{staticClass:"match-height"},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("statistics-card-vertical",{attrs:{change:t.purchasedCoins.change,color:t.purchasedCoins.color,icon:t.purchasedCoins.icon,statistics:t.purchasedCoins.amount,"stat-title":t.purchasedCoins.statTitle,subtitle:t.purchasedCoins.subtitle}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("statistics-card-vertical",{attrs:{change:t.consumedCoins.change,color:t.consumedCoins.color,icon:t.consumedCoins.icon,statistics:t.consumedCoins.amount,"stat-title":t.consumedCoins.statTitle,subtitle:t.consumedCoins.subtitle}})],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"12"}},[a("dashboard-statistics-card",{attrs:{"all-counts":t.allCounts}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},["advanced"===t.mode?a("dashboard-weekly-overview",{attrs:{"trip-count":t.plannedTripsCount,"trip-dates":t.plannedTripsDates}}):t._e()],1),a("v-col",{attrs:{cols:"12",md:"6"}},["advanced"===t.mode?a("dashboard-card-sales-by-trips",{attrs:{"best-trips":t.bestTrips}}):t._e()],1)],1)},o=[],i=(a("4160"),a("d3b7"),a("159b"),a("94ed")),r=a("54ff"),n=a("b012"),l=a("f42b"),c=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("v-card",[a("v-card-title",{staticClass:"align-start"},[a("span",{staticClass:"font-weight-semibold text-2xl me-1"},[t._v("Remaining Coins")]),a("v-spacer"),a("v-avatar",{staticClass:"elevation-1",attrs:{size:"60",color:"grey lighten-2",rounded:""}},[a("v-icon",{attrs:{dark:"",color:"warning",size:"55"}},[t._v(" mdi-gold ")])],1)],1),a("v-card-text",{staticClass:"py-4"},[a("div",{staticClass:"d-flex align-center"},[a("h1",{staticClass:"text-4xl font-weight-semibold"},[t._v(" "+t._s(t.amount)+" ")])])])],1)},d=[],u={props:{amount:{type:String,default:""}}},p=u,m=a("2877"),v=a("6544"),h=a.n(v),C=a("8212"),g=a("b0af"),b=a("99d9"),f=a("132d"),x=a("2fa4"),T=Object(m["a"])(p,c,d,!1,null,null,null),w=T.exports;h()(T,{VAvatar:C["a"],VCard:g["a"],VCardText:b["b"],VCardTitle:b["c"],VIcon:f["a"],VSpacer:x["a"]});var _=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("v-card",[a("v-card-title",{staticClass:"align-start"},[a("span",[t._v("Students on Trips")]),a("v-spacer")],1),t.bestTrips.length>0?a("v-card-text",[a("v-list",{staticClass:"pb-0"},t._l(t.bestTrips,(function(s,e){return a("v-list-item",{key:s.id,class:"d-flex align-center px-0 "+(e>0?"mt-4":"")},[a("v-avatar",{class:s.color+" white--text font-weight-medium me-3",attrs:{color:s.color,size:"40"}},[a("span",{staticClass:"text-base"},[t._v(t._s(1==s.is_morning?"AM":"PM"))])]),a("div",{staticClass:"d-flex align-center flex-grow-1 flex-wrap"},[a("div",{staticClass:"me-2"},[a("div",{staticClass:"font-weight-semibold"},[a("span",{staticClass:"text--primary text-base me-1"},[t._v(t._s(s.route))])]),a("v-list-item-subtitle",{staticClass:"text-xs"},[t._v(" "+t._s(s.time)+" - "+t._s(s.repetition)+" ")])],1),a("v-spacer"),a("div",[a("h4",{staticClass:"font-weight-semibold"},[t._v(" "+t._s(s.sales)+" ")])])],1)],1)})),1)],1):a("v-card-text",[a("div",{staticClass:"d-flex align-center justify-center flex-column"},[a("v-icon",{attrs:{size:"150",color:"grey lighten-2"}},[t._v("mdi-emoticon-sad-outline")]),a("span",{staticClass:"text--secondary text-sm"},[t._v("No enough data found")])],1)])],1)},y=[],V={props:{bestTrips:{type:Array,default:function(){return[]}}},setup:function(){return{icons:{mdiDotsVertical:i["z"],mdiChevronUp:i["r"],mdiChevronDown:i["q"]}}}},k=V,S=a("8860"),D=a("da13"),L=a("5d23"),E=Object(m["a"])(k,_,y,!1,null,null,null),$=E.exports;h()(E,{VAvatar:C["a"],VCard:g["a"],VCardText:b["b"],VCardTitle:b["c"],VIcon:f["a"],VList:S["a"],VListItem:D["a"],VListItemSubtitle:L["b"],VSpacer:x["a"]});var z=a("d612"),R={components:{StatisticsCardVertical:r["a"],DashboardStatisticsCard:l["a"],DashboardCardRemainingCoins:w,DashboardCardSalesByTrips:$,DashboardWeeklyOverview:z["a"]},data:function(){return{mode:null,isLoading:!1,consumedCoins:{statTitle:"Consumed Coins",icon:i["s"],color:"error",amount:""},bestTrips:[],plannedTripsCount:[],plannedTripsDates:[],bestTripsColors:["success","error","warning","secondary","error"],purchasedCoins:{statTitle:"Purchased Coins",icon:i["x"],color:"success",amount:""},remainingCoins:null,allCounts:[{title:"Students",total:""},{title:"Guardians",total:""},{title:"Drivers",total:""},{title:"Routes",total:""},{title:"Stops",total:""},{title:"Trips",total:""}]}},mounted:function(){this.mode=n["a"].getMode(),this.fetchDashboardStatistics()},methods:{getTripColor:function(t){return 1==t.is_morning?"success":"info"},fetchDashboardStatistics:function(){var t=this;this.isLoading=!0,this.reservations=[],axios.get("/school-dashboard/all").then((function(s){for(var a in t.purchasedCoins.amount=s.data.purchasedCoins,t.consumedCoins.amount=s.data.consumedCoins,t.remainingCoins=s.data.remainingCoins,t.allCounts[0].total=s.data.totalStudents,t.allCounts[1].total=s.data.totalGuardians,t.allCounts[2].total=s.data.totalDrivers,t.allCounts[3].total=s.data.totalRoutes,t.allCounts[4].total=s.data.totalStops,t.allCounts[5].total=s.data.totalTrips,t.bestTrips=s.data.bestTrips,t.bestTrips.forEach((function(s,a){s.color=t.bestTripsColors[a]})),s.data.plannedTrips)t.plannedTripsCount.push(s.data.plannedTrips[a]),t.plannedTripsDates.push(a)}))["catch"]((function(s){t.$notify({title:"Error",text:"Error while retrieving dashboard statistics",type:"error"}),console.log(s),n["a"].checkError(s.response.data.message,t.$router,t.$swal)})).then((function(){t.isLoading=!1}))}}},j=R,A=(a("d798"),a("62ad")),I=a("0fd9"),O=a("3129"),M=Object(m["a"])(j,e,o,!1,null,null,null);s["default"]=M.exports;h()(M,{VCol:A["a"],VRow:I["a"],VSkeletonLoader:O["a"]})},d798:function(t,s,a){"use strict";a("e10c")},e10c:function(t,s,a){}}]);
//# sourceMappingURL=chunk-099bbf32.a5624192.js.map