(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2eafca8b"],{"012a":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("GmapMap",{ref:"mapp",staticStyle:{width:"100%",height:"400px"},attrs:{center:t.center,zoom:t.zoom},on:{click:t.mark}},[s("gmap-info-window",{attrs:{options:t.infoOptions,position:t.infoWindowPos,opened:t.infoWinOpen},on:{closeclick:function(e){t.infoWinOpen=!1}}}),t._l(t.markers,(function(t,e){return s("GmapMarker",{key:e,attrs:{position:t.position,icon:t.icon}})})),t._l(t.polylines,(function(t,e){return s("gmap-polyline",{attrs:{path:t.data,options:{strokeColor:t.strokeColor,strokeWeight:5}}})}))],2),t.markers.length>1?s("v-btn",{staticClass:"ma-1 float-right my-2",attrs:{depressed:"",color:"success"},on:{click:t.fitBounds}},[t._v(" Fit "),s("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-fit-to-screen-outline ")])],1):t._e()],1)},n=[],o=(s("a9e3"),s("4160"),s("d3b7"),s("159b"),s("755e")),a={props:{center:Object,zoom:Number,apiKey:String,markers:Array,selected:String,enabled:Boolean,polylines:[]},data:function(){return{infoWindowPos:null,infoWinOpen:!1,currentMidx:null,infoOptions:{content:"",pixelOffset:{width:0,height:-35}}}},watch:{markers:function(t,e){this.fitBounds()},selected:function(t,e){for(var s=-1,i=0;i<this.markers.length;i++){var n=this.markers[i];if(n.place_id==t){s=i;break}}-1!=s?this.toggleInfoWindow(this.markers[s],s):this.infoWinOpen=!1}},computed:{google:o["gmapApi"]},beforeMount:function(){null==this.google&&Object(o["loadGmapApi"])({key:this.apiKey,libraries:"places, geocoding"})},methods:{mark:function(t){var e=this;if(this.enabled){var s={lat:t.latLng.lat(),lng:t.latLng.lng()},i=new google.maps.Geocoder;i.geocode({location:s}).then((function(t){t.results[0]?e.$emit("map-click",t.results[0]):window.alert("No results found")}))["catch"]((function(t){return window.alert("Geocoder failed due to: "+t)}))}},fitBounds:function(){if(1!=this.markers.length){var t=new google.maps.LatLngBounds;0!=this.markers.length&&(this.markers.forEach((function(e){t.extend({lat:e.position.lat,lng:e.position.lng})})),this.$refs.mapp.fitBounds(t))}},toggleInfoWindow:function(t,e){this.infoWindowPos=t.position,this.infoOptions.content=t.infoText,this.currentMidx==e?this.infoWinOpen=!this.infoWinOpen:(this.infoWinOpen=!0,this.currentMidx=e)}}},r=a,l=s("2877"),c=s("6544"),d=s.n(c),h=s("8336"),u=s("132d"),g=Object(l["a"])(r,i,n,!1,null,null,null);e["a"]=g.exports;d()(g,{VBtn:h["a"],VIcon:u["a"]})},"3a2f":function(t,e,s){"use strict";var i=s("ade3"),n=(s("a9e3"),s("e25e"),s("9734"),s("4ad4")),o=s("a9ad"),a=s("16b7"),r=s("b848"),l=s("f573"),c=s("f2e7"),d=s("80d2"),h=s("d9bd"),u=s("58df");e["a"]=Object(u["a"])(o["a"],a["a"],r["a"],l["a"],c["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,s=t.content,i=!this.bottom&&!this.left&&!this.top&&!this.right,n=!1!==this.attach?e.offsetLeft:e.left,o=0;return this.top||this.bottom||i?o=n+e.width/2-s.width/2:(this.left||this.right)&&(o=n+(this.right?e.width:-s.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(o,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,s=t.content,i=!1!==this.attach?e.offsetTop:e.top,n=0;return this.top||this.bottom?n=i+(this.bottom?e.height:-s.height)+(this.bottom?10:-10):(this.left||this.right)&&(n=i+e.height/2-s.height/2),this.nudgeTop&&(n-=parseInt(this.nudgeTop)),this.nudgeBottom&&(n+=parseInt(this.nudgeBottom)),!1===this.attach&&(n+=this.pageYOffset),"".concat(this.calcYOverflow(n),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(d["h"])(this.maxWidth),minWidth:Object(d["h"])(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(d["u"])(this,"activator",!0)&&Object(h["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=n["a"].options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===d["y"].esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(i["a"])(t,this.contentClass,!0),Object(i["a"])(t,"menuable__content__active",this.isActive),Object(i["a"])(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}})},9734:function(t,e,s){},a479:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[s("v-icon",t._g({attrs:{color:"primary"}},i),[t._v(" mdi-information-outline ")])]}}])},[s("span",[t._v(t._s(t.message))])])},n=[],o={name:"InfoToolTip",props:{message:{type:String,default:""}}},a=o,r=s("2877"),l=s("6544"),c=s.n(l),d=s("132d"),h=s("3a2f"),u=Object(r["a"])(a,i,n,!1,null,null,null);e["a"]=u.exports;c()(u,{VIcon:d["a"],VTooltip:h["a"]})},b5e2:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",[s("v-card-title",[s("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-cog ")]),s("span",{staticClass:"pl-2"},[t._v("School settings")])],1),s("v-card-text",[s("vue-element-loading",{attrs:{active:t.isLoading}}),t.settings?s("v-form",[s("div",{staticClass:"my-4"},[s("label",{staticClass:"text--secondary font-weight-bold"},[t._v("School Code")])]),s("div",{staticClass:"my-4"},[s("label",{staticClass:"text--secondary"},[t._v(t._s(t.settings.school_code))])])]):t._e(),t.settings?s("v-form",{directives:[{name:"show",rawName:"v-show",value:"simple"===t.mode,expression:"mode === 'simple'"}],ref:"form",staticClass:"my-2",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("div",{staticClass:"my-4"},[s("label",{staticClass:"text--secondary font-weight-bold"},[t._v("Address settings")])]),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("label",{attrs:{for:"school-address"}},[t._v("Address")])]),s("v-col",{attrs:{cols:"12",md:"9"}},[s("div",{staticClass:"\n                    v-input v-input--hide-details v-input--dense\n                    theme--light\n                    v-text-field\n                    v-text-field--is-booted\n                    v-text-field--enclosed\n                    v-text-field--outlined\n                    v-text-field--placeholder\n                  ",class:{"v-input--has-state error--text":t.badAddress}},[s("div",{staticClass:"v-input__control"},[s("div",{staticClass:"v-input__slot"},[s("div",{staticClass:"v-text-field__slot"},[s("GmapAutocomplete",{ref:"schoolAddress",attrs:{id:"school-address",placeholder:"School Address"},on:{place_changed:t.setPlace}})],1)])])])])],1),s("v-row",[s("v-btn",{staticClass:"ma-1 ml-2 float-right my-2",attrs:{color:"success"},on:{click:t.useCurrentLocation}},[t._v(" Use current location "),s("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-map-marker ")])],1)],1)],1),s("v-col",{attrs:{cols:"12",md:"8"}},[s("GoogleMapLoader",{attrs:{enabled:!0,center:t.center,zoom:t.zoom,apiKey:t.apiKey,markers:t.markers},on:{"map-click":t.handleMapClick}})],1)],1),s("div",{staticClass:"mt-8"},[s("label",{staticClass:"text--secondary font-weight-bold"},[t._v("Closed week days")]),s("info-tool-tip",{staticClass:"ml-2",attrs:{message:"Set the days that the school is closed."}})],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-checkbox",{attrs:{label:"Saturday","persistent-hint":""},model:{value:t.settings.saturday,callback:function(e){t.$set(t.settings,"saturday",e)},expression:"settings.saturday"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-checkbox",{attrs:{label:"Sunday","persistent-hint":""},model:{value:t.settings.sunday,callback:function(e){t.$set(t.settings,"sunday",e)},expression:"settings.sunday"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-checkbox",{attrs:{label:"Monday","persistent-hint":""},model:{value:t.settings.monday,callback:function(e){t.$set(t.settings,"monday",e)},expression:"settings.monday"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-checkbox",{attrs:{label:"Tuesday","persistent-hint":""},model:{value:t.settings.tuesday,callback:function(e){t.$set(t.settings,"tuesday",e)},expression:"settings.tuesday"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-checkbox",{attrs:{label:"Wednesday","persistent-hint":""},model:{value:t.settings.wednesday,callback:function(e){t.$set(t.settings,"wednesday",e)},expression:"settings.wednesday"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-checkbox",{attrs:{label:"Thursday","persistent-hint":""},model:{value:t.settings.thursday,callback:function(e){t.$set(t.settings,"thursday",e)},expression:"settings.thursday"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-checkbox",{attrs:{label:"Friday","persistent-hint":""},model:{value:t.settings.friday,callback:function(e){t.$set(t.settings,"friday",e)},expression:"settings.friday"}})],1)],1)],1):t._e()],1),t.settings&&"simple"===t.mode?s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{disabled:!t.valid,color:"primary"},on:{click:t.saveSettings}},[t._v(" Save "),s("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-content-save ")])],1)],1):t._e()],1)],1)},n=[],o=(s("acd8"),s("755e")),a=s("a479"),r=s("6ad0"),l=s.n(r),c=s("b012"),d=s("012a"),h=s("db49"),u={components:{VueElementLoading:l.a,InfoToolTip:a["a"],GoogleMapLoader:d["a"]},data:function(){return{apiKey:h["a"].GOOGLE_MAPS_API_KEY,isLoading:!1,settings:null,valid:!0,requiredRules:[function(t){return!!t||"Required."}],badAddress:!1,markers:[],currentPlace:null,center:{lat:h["a"].VUE_APP_ORIGIN_LAT,lng:h["a"].VUE_APP_ORIGIN_LNG},zoom:15,mode:null}},computed:{google:o["gmapApi"]},mounted:function(){this.center.lat=parseFloat(this.center.lat),this.center.lng=parseFloat(this.center.lng),this.mode=c["a"].getMode(),this.loadSettings()},methods:{useCurrentLocation:function(){this.isLoading=!0,this.geolocate()},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){var s=new google.maps.Geocoder,i={lat:e.coords.latitude,lng:e.coords.longitude};s.geocode({location:i}).then((function(e){e.results[0]?(t.setPlace(e.results[0]),t.$nextTick((function(){t.$refs.schoolAddress.$el.value=t.settings.address}))):window.alert("No results found"),t.isLoading=!1}))["catch"]((function(t){return window.alert("Geocoder failed due to: "+t)}),t.isLoading=!1)}))},setPlace:function(t){this.currentPlace=t,this.updateSchoolFromPlace(t),this.addSchoolMarker()},addSchoolMarker:function(){if(this.settings.lat&&this.settings.lng){var t={lat:parseFloat(this.settings.lat),lng:parseFloat(this.settings.lng)},e={place_id:this.settings.place_id,position:t};this.markers=[],this.markers.push(e),this.center=t}},handleMapClick:function(t){var e=this;this.setPlace(t),this.$nextTick((function(){e.$refs.schoolAddress.$el.value=e.settings.address}))},updateSchoolFromPlace:function(t){this.settings.place_id=t.place_id,this.settings.address=t.formatted_address,this.settings.lat=t.geometry.location.lat(),this.settings.lng=t.geometry.location.lng()},saveSettings:function(){var t=this;this.submiting=!0,this.settings.saturday=this.settings.saturday?1:0,this.settings.sunday=this.settings.sunday?1:0,this.settings.monday=this.settings.monday?1:0,this.settings.tuesday=this.settings.tuesday?1:0,this.settings.wednesday=this.settings.wednesday?1:0,this.settings.thursday=this.settings.thursday?1:0,this.settings.friday=this.settings.friday?1:0,axios.post("/settings/update-school",this.settings).then((function(e){t.submiting=!1,t.$notify({title:"Success",text:"Settings updated!",type:"success"})}))["catch"]((function(e){t.submiting=!1,t.$notify({title:"Error",text:"Error updating settings",type:"error"}),console.log(e)}))},loadSettings:function(){var t=this;this.isLoading=!0,this.settings=[],axios.get("/settings/school").then((function(e){t.settings=e.data,t.$refs.schoolAddress.$el.value=t.settings.address,t.addSchoolMarker()}))["catch"]((function(e){t.$notify({title:"Error",text:"Error while retrieving settings",type:"error"}),console.log(e),c["a"].checkError(e.response.data.message,t.$router,t.$swal)})).then((function(){t.isLoading=!1}))},validate:function(){this.valid=!1;var t=this.$refs.form.validate();return!!t&&(this.valid=!0,!0)}}},g=u,f=s("2877"),p=s("6544"),v=s.n(p),m=s("8336"),y=s("b0af"),b=s("99d9"),k=s("ac7c"),_=s("62ad"),x=s("4bd4"),w=s("132d"),C=s("0fd9"),A=s("2fa4"),O=Object(f["a"])(g,i,n,!1,null,null,null);e["default"]=O.exports;v()(O,{VBtn:m["a"],VCard:y["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCheckbox:k["a"],VCol:_["a"],VForm:x["a"],VIcon:w["a"],VRow:C["a"],VSpacer:A["a"]})}}]);
//# sourceMappingURL=chunk-2eafca8b.a1f7da0f.js.map