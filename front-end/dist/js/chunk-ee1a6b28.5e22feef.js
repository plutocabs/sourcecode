(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee1a6b28"],{1447:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-card",[i("v-card-title",[i("v-icon",{attrs:{color:"primary"}},[e._v(" mdi-credit-card-outline ")]),i("span",{staticClass:"pl-2"},[e._v("Payments")]),i("v-spacer"),i("v-chip",{staticClass:"mr-2",attrs:{color:"primary","text-color":"white"}},[e._v(" Total: "+e._s(e.totalPaid)+" ")])],1),i("v-data-table",{attrs:{"item-key":"id",loading:e.isLoading,"loading-text":"Loading... Please wait",headers:e.headers,items:e.payments,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[i("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"item.payer_type",fn:function(t){var n=t.item;return[i("v-icon",{staticClass:"mr-2"},[e._v(" "+e._s("school"==n.payer_type?"mdi-school":"mdi-account")+" ")]),e._v(" "+e._s(n.payer.name)+" ")]}},{key:"item.payment_date",fn:function(t){var i=t.item;return[e._v(" "+e._s(e._f("moment")(i.payment_date,"LL"))+" ")]}}])})],1)],1)},a=[],r=(i("b0c0"),i("a434"),i("b012")),s={components:{},data:function(){return{payments:[],totalPaid:0,isLoading:!1,search:"",headers:[{text:"ID",value:"id",align:"start",filterable:!1},{text:"Plan",value:"plan_name"},{text:"Paid price",value:"price"},{text:"Date",value:"payment_date"},{text:"Payer",value:"payer_type"}]}},mounted:function(){this.loadPayments()},methods:{loadPayments:function(){var e=this;this.isLoading=!0,this.payments=[],axios.get("/charges/all").then((function(t){e.payments=t.data.charges,e.totalPaid=t.data.totalPaid}))["catch"]((function(t){e.$notify({title:"Error",text:"Error while retrieving payments",type:"error"}),console.log(t),r["a"].checkError(t.response.data.message,e.$router,e.$swal)})).then((function(){e.isLoading=!1}))},viewUpcomingPayment:function(e){this.$router.push({name:"view-upcoming-payment",params:{user_id:e.id}})},redeemPayment:function(e){var t=this;this.$swal({title:"Redeem Payment",html:"Are you sure you want to redeem "+this.payments[e].total_amount+" for "+this.payments[e].user_name+"? <br/><br/>"+this.showRedemptionDetails(e),icon:"warning",footer:this.showRedemptionFooter(e),showCancelButton:!0,confirmButtonText:"Yes, redeem it!"}).then((function(i){i.isConfirmed&&t.redeemPaymentServer(t.payments[e].id,e)}))},showRedemptionFooter:function(e){var t=this.payments[e].redemption_preference;return 2==t?"<h2>Bank Account</h2>":3==t?"<h2>PayPal</h2>":4==t?"<h2>Mobile Money</h2>":"<h2>Cash</h2>"},showRedemptionDetails:function(e){var t=this.payments[e].redemption_preference;return console.log(t),2==t?"<ul><li><b>Bank Name:</b> "+this.payments[e].redemption_details.bank_name+"</li><li><b>Account Number:</b> "+this.payments[e].redemption_details.account_number+"</li><li><b>Beneficiary Name:</b> "+this.payments[e].redemption_details.beneficiary_name+"</li><li><b>Beneficiary Address:</b> "+this.payments[e].redemption_details.beneficiary_address+"</li>"+(null!=this.payments[e].redemption_details.iban?"<li><b>IBAN:</b> "+this.payments[e].redemption_details.iban+"</li>":"")+(null!=this.payments[e].redemption_details.swift?"<li><b>Swift:</b> "+this.payments[e].redemption_details.swift+"</li>":"")+(null!=this.payments[e].redemption_details.routing_number?"<li><b>Routing Number:</b> "+this.payments[e].redemption_details.routing_number+"</li>":"")+(null!=this.payments[e].redemption_details.bic?"<li><b>Bank Identification Code:</b> "+this.payments[e].redemption_details.bic+"</li>":"")+"</ul>":3==t?"<b>PayPal:</b> "+this.payments[e].redemption_details.email:4==t?"<ul><li><b>Phone Number:</b> "+this.payments[e].redemption_details.phone_number+"</li><li><b>Network:</b> "+this.payments[e].redemption_details.network+"</li><li><b>Name:</b> "+this.payments[e].redemption_details.name+"</li></ul>":""},redeemPaymentServer:function(e,t){var i=this;this.isLoading=!0,axios.post("/users/redeem",{user_id:e}).then((function(e){i.$notify({title:"Success",text:"Payment redeemed",type:"success"}),i.payments.splice(t,1)}))["catch"]((function(e){i.$notify({title:"Error",text:"Error while redeeming payment",type:"error"}),console.log(e),i.$swal("Error",e.response.data.message,"error")})).then((function(){i.isLoading=!1}))}}},o=s,l=(i("e416"),i("2877")),d=i("6544"),u=i.n(d),c=i("b0af"),m=i("99d9"),p=i("cc20"),h=i("8fea"),f=i("132d"),v=i("2fa4"),y=i("8654"),b=Object(l["a"])(o,n,a,!1,null,null,null);t["default"]=b.exports;u()(b,{VCard:c["a"],VCardTitle:m["c"],VChip:p["a"],VDataTable:h["a"],VIcon:f["a"],VSpacer:v["a"],VTextField:y["a"]})},"1dbd":function(e,t,i){},"4ec9":function(e,t,i){"use strict";var n=i("6d61"),a=i("6566");n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(e,t,i){"use strict";var n=i("9bf2").f,a=i("7c73"),r=i("e2cc"),s=i("0366"),o=i("19aa"),l=i("2266"),d=i("7dd0"),u=i("2626"),c=i("83ab"),m=i("f183").fastKey,p=i("69f3"),h=p.set,f=p.getterFor;e.exports={getConstructor:function(e,t,i,d){var u=e((function(e,n){o(e,p),h(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),c||(e.size=0),void 0!=n&&l(n,e[d],{that:e,AS_ENTRIES:i})})),p=u.prototype,v=f(t),y=function(e,t,i){var n,a,r=v(e),s=b(e,t);return s?s.value=i:(r.last=s={index:a=m(t,!0),key:t,value:i,previous:n=r.last,next:void 0,removed:!1},r.first||(r.first=s),n&&(n.next=s),c?r.size++:e.size++,"F"!==a&&(r.index[a]=s)),e},b=function(e,t){var i,n=v(e),a=m(t);if("F"!==a)return n.index[a];for(i=n.first;i;i=i.next)if(i.key==t)return i};return r(p,{clear:function(){var e=this,t=v(e),i=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete i[n.index],n=n.next;t.first=t.last=void 0,c?t.size=0:e.size=0},delete:function(e){var t=this,i=v(t),n=b(t,e);if(n){var a=n.next,r=n.previous;delete i.index[n.index],n.removed=!0,r&&(r.next=a),a&&(a.previous=r),i.first==n&&(i.first=a),i.last==n&&(i.last=r),c?i.size--:t.size--}return!!n},forEach:function(e){var t,i=v(this),n=s(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:i.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),r(p,i?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),c&&n(p,"size",{get:function(){return v(this).size}}),u},setStrong:function(e,t,i){var n=t+" Iterator",a=f(t),r=f(n);d(e,t,(function(e,t){h(this,{type:n,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,i=e.last;while(i&&i.removed)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?"keys"==t?{value:i.key,done:!1}:"values"==t?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),u(t)}}},"6d61":function(e,t,i){"use strict";var n=i("23e7"),a=i("da84"),r=i("e330"),s=i("94ca"),o=i("6eeb"),l=i("f183"),d=i("2266"),u=i("19aa"),c=i("1626"),m=i("861d"),p=i("d039"),h=i("1c7e"),f=i("d44e"),v=i("7156");e.exports=function(e,t,i){var y=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),_=y?"set":"add",g=a[e],x=g&&g.prototype,w=g,k={},P=function(e){var t=r(x[e]);o(x,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!m(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return b&&!m(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!m(e))&&t(this,0===e?0:e)}:function(e,i){return t(this,0===e?0:e,i),this})},C=s(e,!c(g)||!(b||x.forEach&&!p((function(){(new g).entries().next()}))));if(C)w=i.getConstructor(t,e,y,_),l.enable();else if(s(e,!0)){var E=new w,S=E[_](b?{}:-0,1)!=E,z=p((function(){E.has(1)})),N=h((function(e){new g(e)})),L=!b&&p((function(){var e=new g,t=5;while(t--)e[_](t,t);return!e.has(-0)}));N||(w=t((function(e,t){u(e,x);var i=v(new g,e,w);return void 0!=t&&d(t,i[_],{that:i,AS_ENTRIES:y}),i})),w.prototype=x,x.constructor=w),(z||L)&&(P("delete"),P("has"),y&&P("get")),(L||S)&&P(_),b&&x.clear&&delete x.clear}return k[e]=w,n({global:!0,forced:w!=g},k),f(w,e),b||i.setStrong(w,e,y),w}},e416:function(e,t,i){"use strict";i("1dbd")}}]);
//# sourceMappingURL=chunk-ee1a6b28.5e22feef.js.map